/*
* Semantic clone benchmark
*  Source code are extracted from Stack Overflow
*  Stack overflow Question #:21309900
*  Stack Overflow answer #:21310339
*  And Stack Overflow answer#:21312352
*/
void mexFunction (int nlhs, mxArray *plhs [], int nrhs, const mxArray *prhs []) {
    double *data;
    int numData;
    doStuff (& data, & numData);
    plhs[0] = mxCreateDoubleMatrix (1, numData, mxREAL);
    memcpy (mxGetPr (plhs [0]), data, numData * sizeof (double));
    free (data);
    plhs[1] = mxCreateDoubleScalar (numData);
}

void mexFunction (int nlhs, mxArray *plhs [], int nrhs, const mxArray *prhs []) {
    if (nrhs != 0 || nlhs > 2) {
        mexErrMsgTxt ("Wrong number of arguments");
    }
    int len = 5;
    double *arr = (double *) malloc (len * sizeof (double));
    for (int i = 0; i < len; i++) {
        arr[i] = 10.0 * i;
    }
    plhs[0] = mxCreateDoubleMatrix (1, len, mxREAL);
    memcpy (mxGetPr (plhs [0]), arr, len * sizeof (double));
    if (nlhs > 1) {
        plhs[1] = mxCreateDoubleScalar (len);
    }
    free (arr);
}

